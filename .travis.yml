language: python
python:
    - "2.7"
sudo: required
dist: trusty
before_install:
    - sudo apt-get install -y xvfb
    - sudo apt-get install -y mercurial libfreetype6-dev
    - sudo apt-get build-dep -y python-pygame
    - pip install hg+http://bitbucket.org/pygame/pygame
install: 
    - pip install -r requirements.txt
    - pip install -r test-requirements.txt
    - python setup.py install
script: "./runtests"
after_success: "COVERALLS_REPO_TOKEN=$coveralls_token coveralls"
after_failure: "COVERALS_REPO_TOKEN=$coveralls_token coveralls"
